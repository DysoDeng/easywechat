"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4963],{84201:(a,s,n)=>{n.r(s),n.d(s,{data:()=>e});const e={key:"v-29b34aa0",path:"/4.x/micro-merchant/certficates.html",title:"获取平台证书",lang:"en-US",frontmatter:{},excerpt:"",headers:[],filePathRelative:"4.x/micro-merchant/certficates.md",git:{updatedTime:1629906046e3,contributors:[]}}},28889:(a,s,n)=>{n.r(s),n.d(s,{default:()=>t});const e=(0,n(66252).uE)('<h1 id="获取平台证书" tabindex="-1"><a class="header-anchor" href="#获取平台证书" aria-hidden="true">#</a> 获取平台证书</h1><p>调用获取平台证书接口之前，请前往微信支付商户平台升级API证书，升级后才可成功调用本接口。</p><div class="language-php ext-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// 获取到证书后可以做缓存处理，无需每次重新获取</span>\n<span class="token variable">$response</span> <span class="token operator">=</span> <span class="token variable">$app</span><span class="token operator">-&gt;</span><span class="token property">certficates</span><span class="token operator">-&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token keyword type-hint">bool</span> <span class="token variable">$returnRaw</span> <span class="token operator">=</span> <span class="token constant boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n<span class="token comment">// 获取到平台证书后，可以直接使用 setCertificate 方法把证书配置追加到配置项里面去</span>\n<span class="token variable">$app</span><span class="token operator">-&gt;</span><span class="token function">setCertificate</span><span class="token punctuation">(</span><span class="token keyword type-hint">string</span> <span class="token variable">$certificate</span><span class="token punctuation">,</span> <span class="token keyword type-hint">string</span> <span class="token variable">$serialNo</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>$returnRaw 不填默认为false时，请确保你的PHP已安装了sodium扩展<br> 返回值：固定array格式的解密后的证书信息</p></blockquote><blockquote><p>$returnRaw 传入true时<br> 返回值：Response对象<code>$response-&gt;getBody()-&gt;getContents();</code>获取到微信返回xml原始数据</p></blockquote>',5),t={render:function(a,s){return e}}}}]);
//# sourceMappingURL=v-29b34aa0.870e684c.js.map