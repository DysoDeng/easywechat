{"version":3,"file":"assets/js/v-2113998f.35a2ad93.js","mappings":"8GAAO,MAAMA,EAAO,CAClB,IAAO,aACP,KAAQ,0BACR,MAAS,GACT,KAAQ,QACR,YAAe,GACf,QAAW,GACX,QAAW,CACT,CACE,MAAS,EACT,MAAS,MACT,KAAQ,MACR,SAAY,KAGhB,iBAAoB,uBACpB,IAAO,CACL,YAAe,aACf,aAAgB,M,uDClBpB,E,SAAA,i1JCIA,EAHe,CACf,O,qBDFA","sources":["webpack:///./.vuepress/.temp/pages/5.x/wework/server.html.js","webpack:///./.vuepress/.temp/pages/5.x/wework/server.html.vue","webpack:///./.vuepress/.temp/pages/5.x/wework/server.html.vue?9e4c"],"sourcesContent":["export const data = {\n  \"key\": \"v-2113998f\",\n  \"path\": \"/5.x/wework/server.html\",\n  \"title\": \"\",\n  \"lang\": \"en-US\",\n  \"frontmatter\": {},\n  \"excerpt\": \"\",\n  \"headers\": [\n    {\n      \"level\": 2,\n      \"title\": \"服务端\",\n      \"slug\": \"服务端\",\n      \"children\": []\n    }\n  ],\n  \"filePathRelative\": \"5.x/wework/server.md\",\n  \"git\": {\n    \"updatedTime\": 1629906046000,\n    \"contributors\": []\n  }\n}\n","<h2 id=\"服务端\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#服务端\" aria-hidden=\"true\">#</a> 服务端</h2>\n<p>我们在企业微信应用开启接收消息的功能，将设置页面的 token 与 aes key 配置到 agents 下对应的应用内：</p>\n<div class=\"language-php ext-php line-numbers-mode\"><pre v-pre class=\"language-php\"><code><span class=\"token variable\">$config</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string single-quoted-string\">'corp_id'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'xxxxxxxxxxxxxxxxx'</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token string single-quoted-string\">'agent_id'</span> <span class=\"token operator\">=></span> <span class=\"token number\">100022</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string single-quoted-string\">'secret'</span>   <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'xxxxxxxxxx'</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">// server config</span>\n    <span class=\"token string single-quoted-string\">'token'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'xxxxxxxxx'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string single-quoted-string\">'aes_key'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'xxxxxxxxxxxxxxxxxx'</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">//...</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token variable\">$app</span> <span class=\"token operator\">=</span> <span class=\"token class-name static-context\">Factory</span><span class=\"token operator\">::</span><span class=\"token function\">work</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$config</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre><div class=\"line-numbers\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br><span class=\"line-number\">3</span><br><span class=\"line-number\">4</span><br><span class=\"line-number\">5</span><br><span class=\"line-number\">6</span><br><span class=\"line-number\">7</span><br><span class=\"line-number\">8</span><br><span class=\"line-number\">9</span><br><span class=\"line-number\">10</span><br><span class=\"line-number\">11</span><br><span class=\"line-number\">12</span><br><span class=\"line-number\">13</span><br><span class=\"line-number\">14</span><br></div></div><p>接着配置服务端与公众号的服务端用法一样：</p>\n<div class=\"language-php ext-php line-numbers-mode\"><pre v-pre class=\"language-php\"><code><span class=\"token variable\">$app</span><span class=\"token operator\">-></span><span class=\"token property\">server</span><span class=\"token operator\">-></span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$message</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n   <span class=\"token comment\">// $message['FromUserName'] // 消息来源</span>\n   <span class=\"token comment\">// $message['MsgType'] // 消息类型：event ....</span>\n    \n    <span class=\"token keyword\">return</span> <span class=\"token string single-quoted-string\">'Hello easywechat.'</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token variable\">$response</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$app</span><span class=\"token operator\">-></span><span class=\"token property\">server</span><span class=\"token operator\">-></span><span class=\"token function\">serve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token variable\">$response</span><span class=\"token operator\">-></span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre><div class=\"line-numbers\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br><span class=\"line-number\">3</span><br><span class=\"line-number\">4</span><br><span class=\"line-number\">5</span><br><span class=\"line-number\">6</span><br><span class=\"line-number\">7</span><br><span class=\"line-number\">8</span><br><span class=\"line-number\">9</span><br><span class=\"line-number\">10</span><br></div></div><p><code>$response</code> 为 <code>Symfony\\Component\\HttpFoundation\\Response</code> 实例，根据你的框架情况来决定如何处理响应。</p>\n","import { render } from \"./server.html.vue?vue&type=template&id=7abc685c\"\nconst script = {}\nscript.render = render\n\nexport default script"],"names":["data"],"sourceRoot":""}