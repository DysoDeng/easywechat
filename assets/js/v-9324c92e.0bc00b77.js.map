{"version":3,"file":"assets/js/v-9324c92e.0bc00b77.js","mappings":"gHAAO,MAAMA,EAAO,CAClB,IAAO,aACP,KAAQ,yBACR,MAAS,QACT,KAAQ,QACR,YAAe,GACf,QAAW,GACX,QAAW,CACT,CACE,MAAS,EACT,MAAS,OACT,KAAQ,OACR,SAAY,IAEd,CACE,MAAS,EACT,MAAS,WACT,KAAQ,WACR,SAAY,IAEd,CACE,MAAS,EACT,MAAS,OACT,KAAQ,OACR,SAAY,KAGhB,iBAAoB,sBACpB,IAAO,CACL,YAAe,aACf,aAAgB,M,sEC9BpB,OAAuG,MAAnGC,GAAG,QAAQC,SAAS,M,EAAK,OAA+D,KAA5DC,MAAM,gBAAgBC,KAAK,SAAS,cAAY,QAAO,MAAvF,QAA4F,Y,MAC5F,OAEa,oBADb,OAAoC,SAAjC,mC,MAEGA,KAAK,uDAAuDC,OAAO,SAASC,IAAI,uB,GAJtF,QAI4G,Y,GAJ5G,mxL,GAAA,QAiC0R,wB,GAAuBF,KAAK,oEAAoEC,OAAO,SAASC,IAAI,uB,GAjC9Y,QAiCoa,c,GACpa,OAAoG,MAAhGL,GAAG,OAAOC,SAAS,M,EAAK,OAA8D,KAA3DC,MAAM,gBAAgBC,KAAK,QAAQ,cAAY,QAAO,MAlCrF,QAkC0F,W,MAlC1F,QAoCI,U,GAASA,KAAK,yCAAyCC,OAAO,SAASC,IAAI,uB,GApC/E,QAoCqG,sB,GApCrG,QAoC0I,uB,GApC1I,QAqCI,iB,GAAgBF,KAAK,+CAA+CC,OAAO,SAASC,IAAI,uB,GArC5F,QAqCkH,6BCjClH,EAHe,CACf,O,iEDFA,qBACA,GAGA,OAA2I,WAAxI,OAAoI,IAApI,EAAoI,CAJvI,GAIoH,QAAe,OACnI,GA4BuR,OAA8K,UAjCrc,GAiC8S,OAAmJ,IAAnJ,EAAmJ,CAjCjc,GAiC8a,QAAe,OAC7b,GACA,OAGK,YAFL,OAAkK,WApClK,GAoCU,OAAgI,IAAhI,EAAgI,CApC1I,GAoCuH,QAAe,KApCtI,KAqCA,OAAmK,WArCnK,GAqCiB,OAA6I,IAA7I,EAA6I,CArC9J,GAqC2I,QAAe,U","sources":["webpack:///./.vuepress/.temp/pages/5.x/wework/oauth.html.js","webpack:///./.vuepress/.temp/pages/5.x/wework/oauth.html.vue","webpack:///./.vuepress/.temp/pages/5.x/wework/oauth.html.vue?a223"],"sourcesContent":["export const data = {\n  \"key\": \"v-9324c92e\",\n  \"path\": \"/5.x/wework/oauth.html\",\n  \"title\": \"OAuth\",\n  \"lang\": \"en-US\",\n  \"frontmatter\": {},\n  \"excerpt\": \"\",\n  \"headers\": [\n    {\n      \"level\": 2,\n      \"title\": \"跳转授权\",\n      \"slug\": \"跳转授权\",\n      \"children\": []\n    },\n    {\n      \"level\": 2,\n      \"title\": \"获取授权用户信息\",\n      \"slug\": \"获取授权用户信息\",\n      \"children\": []\n    },\n    {\n      \"level\": 2,\n      \"title\": \"参考阅读\",\n      \"slug\": \"参考阅读\",\n      \"children\": []\n    }\n  ],\n  \"filePathRelative\": \"5.x/wework/oauth.md\",\n  \"git\": {\n    \"updatedTime\": 1629906046000,\n    \"contributors\": []\n  }\n}\n","<h1 id=\"oauth\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#oauth\" aria-hidden=\"true\">#</a> OAuth</h1>\n<blockquote>\n<p>{warning} 此文档为企业微信内部应用开发的网页授权</p>\n</blockquote>\n<p><a href=\"https://work.weixin.qq.com/api/doc#90000/90135/91020\" target=\"_blank\" rel=\"noopener noreferrer\">企业微信官方文档<OutboundLink/></a></p>\n<p>创建实例：</p>\n<div class=\"language-php ext-php line-numbers-mode\"><pre v-pre class=\"language-php\"><code><span class=\"token variable\">$config</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string single-quoted-string\">'corp_id'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'xxxxxxxxxxxxxxxxx'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string single-quoted-string\">'secret'</span>   <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'xxxxxxxxxx'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 应用的 secret</span>\n    <span class=\"token string single-quoted-string\">'agent_id'</span> <span class=\"token operator\">=></span> <span class=\"token number\">100001</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token variable\">$app</span> <span class=\"token operator\">=</span> <span class=\"token class-name static-context\">Factory</span><span class=\"token operator\">::</span><span class=\"token function\">work</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$config</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre><div class=\"line-numbers\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br><span class=\"line-number\">3</span><br><span class=\"line-number\">4</span><br><span class=\"line-number\">5</span><br><span class=\"line-number\">6</span><br><span class=\"line-number\">7</span><br></div></div><h2 id=\"跳转授权\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#跳转授权\" aria-hidden=\"true\">#</a> 跳转授权</h2>\n<div class=\"language-php ext-php line-numbers-mode\"><pre v-pre class=\"language-php\"><code><span class=\"token comment\">// $callbackUrl 为授权回调地址</span>\n<span class=\"token variable\">$callbackUrl</span> <span class=\"token operator\">=</span> <span class=\"token string single-quoted-string\">'https://xxx.xxx'</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 需设置可信域名</span>\n\n<span class=\"token comment\">// 返回一个 redirect 实例</span>\n<span class=\"token variable\">$redirect</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$app</span><span class=\"token operator\">-></span><span class=\"token property\">oauth</span><span class=\"token operator\">-></span><span class=\"token function\">redirect</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$callbackUrl</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 获取企业微信跳转目标地址</span>\n<span class=\"token variable\">$targetUrl</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$redirect</span><span class=\"token operator\">-></span><span class=\"token function\">getTargetUrl</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 直接跳转到企业微信授权</span>\n<span class=\"token variable\">$redirect</span><span class=\"token operator\">-></span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre><div class=\"line-numbers\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br><span class=\"line-number\">3</span><br><span class=\"line-number\">4</span><br><span class=\"line-number\">5</span><br><span class=\"line-number\">6</span><br><span class=\"line-number\">7</span><br><span class=\"line-number\">8</span><br><span class=\"line-number\">9</span><br><span class=\"line-number\">10</span><br><span class=\"line-number\">11</span><br></div></div><h2 id=\"获取授权用户信息\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#获取授权用户信息\" aria-hidden=\"true\">#</a> 获取授权用户信息</h2>\n<p>在回调页面中，你可以使用以下方式获取授权者信息：</p>\n<div class=\"language-php ext-php line-numbers-mode\"><pre v-pre class=\"language-php\"><code><span class=\"token variable\">$code</span> <span class=\"token operator\">=</span> <span class=\"token string double-quoted-string\">\"回调URL中的code\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$user</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$app</span><span class=\"token operator\">-></span><span class=\"token property\">oauth</span><span class=\"token operator\">-></span><span class=\"token function\">detailed</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">-></span><span class=\"token function\">userFromCode</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$code</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 获取用户信息</span>\n<span class=\"token variable\">$user</span><span class=\"token operator\">-></span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 对应企业微信英文名（userid）</span>\n<span class=\"token variable\">$user</span><span class=\"token operator\">-></span><span class=\"token function\">getRaw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 获取企业微信接口返回的原始信息</span>\n</code></pre><div class=\"line-numbers\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br><span class=\"line-number\">3</span><br><span class=\"line-number\">4</span><br><span class=\"line-number\">5</span><br><span class=\"line-number\">6</span><br></div></div><p>获取用户其他信息需调用通讯录接口，参考：<a href=\"https://github.com/EasyWeChat/docs/blob/master/wework/contacts.md\" target=\"_blank\" rel=\"noopener noreferrer\">企业微信通讯录API<OutboundLink/></a></p>\n<h2 id=\"参考阅读\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#参考阅读\" aria-hidden=\"true\">#</a> 参考阅读</h2>\n<ul>\n<li>本模块基于 <a href=\"https://github.com/overtrue/socialite/\" target=\"_blank\" rel=\"noopener noreferrer\">overtrue/socialite<OutboundLink/></a> 实现，更多的使用请阅读该扩展包文档。</li>\n<li>state 参数的使用: <a href=\"https://github.com/overtrue/socialite/#state\" target=\"_blank\" rel=\"noopener noreferrer\">overtrue/socialite/#state<OutboundLink/></a></li>\n</ul>\n","import { render } from \"./oauth.html.vue?vue&type=template&id=5b48c7f4\"\nconst script = {}\nscript.render = render\n\nexport default script"],"names":["data","id","tabindex","class","href","target","rel"],"sourceRoot":""}