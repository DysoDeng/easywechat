{"version":3,"file":"9036.app.js","mappings":";;;;;;;;;;;;AAAO;AACP;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;ECtCA;;;;;;;;;;;EAAA;EAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AEA6E;AAC7E;AACA,CAAmC;AACnC;AACA,iDAAiD,2BAAa;AAC9D;AACA,SAAS,SAAS;AAClB;;;AAGA,oDAAe","sources":["webpack:///./.vuepress/.temp/pages/4.x/payment/transfer.html.js","webpack:///./.vuepress/.temp/pages/4.x/payment/transfer.html.vue","webpack:///./.vuepress/.temp/pages/4.x/payment/transfer.html.vue?f8f9","webpack:///./.vuepress/.temp/pages/4.x/payment/transfer.html.vue?5abb"],"sourcesContent":["export const data = {\n  \"key\": \"v-f432eeca\",\n  \"path\": \"/4.x/payment/transfer.html\",\n  \"title\": \"企业付款\",\n  \"lang\": \"en-US\",\n  \"frontmatter\": {},\n  \"excerpt\": \"\",\n  \"headers\": [\n    {\n      \"level\": 2,\n      \"title\": \"企业付款到用户零钱\",\n      \"slug\": \"企业付款到用户零钱\",\n      \"children\": []\n    },\n    {\n      \"level\": 2,\n      \"title\": \"查询付款到零钱的订单\",\n      \"slug\": \"查询付款到零钱的订单\",\n      \"children\": []\n    },\n    {\n      \"level\": 2,\n      \"title\": \"企业付款到银行卡\",\n      \"slug\": \"企业付款到银行卡\",\n      \"children\": []\n    },\n    {\n      \"level\": 2,\n      \"title\": \"查询付款到银行卡的订单\",\n      \"slug\": \"查询付款到银行卡的订单\",\n      \"children\": []\n    }\n  ],\n  \"filePathRelative\": \"4.x/payment/transfer.md\",\n  \"git\": {\n    \"updatedTime\": 1629906046000,\n    \"contributors\": []\n  }\n}\n","<h1 id=\"企业付款\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#企业付款\" aria-hidden=\"true\">#</a> 企业付款</h1>\n<blockquote>\n<p>EasyWeChat 4.0.7+</p>\n</blockquote>\n<p>该模块需要用到双向证书，请参考：https://pay.weixin.qq.com/wiki/doc/api/tools/mch_pay.php?chapter=4_3</p>\n<h2 id=\"企业付款到用户零钱\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#企业付款到用户零钱\" aria-hidden=\"true\">#</a> 企业付款到用户零钱</h2>\n<div class=\"language-php ext-php line-numbers-mode\"><pre v-pre class=\"language-php\"><code><span class=\"token variable\">$app</span><span class=\"token operator\">-></span><span class=\"token property\">transfer</span><span class=\"token operator\">-></span><span class=\"token function\">toBalance</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token string single-quoted-string\">'partner_trade_no'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'1233455'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 商户订单号，需保持唯一性(只能是字母或者数字，不能包含有符号)</span>\n    <span class=\"token string single-quoted-string\">'openid'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'oxTWIuGaIt6gTKsQRLau2M0yL16E'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string single-quoted-string\">'check_name'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'FORCE_CHECK'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// NO_CHECK：不校验真实姓名, FORCE_CHECK：强校验真实姓名</span>\n    <span class=\"token string single-quoted-string\">'re_user_name'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'王小帅'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 如果 check_name 设置为FORCE_CHECK，则必填用户真实姓名</span>\n    <span class=\"token string single-quoted-string\">'amount'</span> <span class=\"token operator\">=></span> <span class=\"token number\">10000</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 企业付款金额，单位为分</span>\n    <span class=\"token string single-quoted-string\">'desc'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'理赔'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 企业付款操作说明信息。必填</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre><div class=\"line-numbers\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br><span class=\"line-number\">3</span><br><span class=\"line-number\">4</span><br><span class=\"line-number\">5</span><br><span class=\"line-number\">6</span><br><span class=\"line-number\">7</span><br><span class=\"line-number\">8</span><br></div></div><h2 id=\"查询付款到零钱的订单\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#查询付款到零钱的订单\" aria-hidden=\"true\">#</a> 查询付款到零钱的订单</h2>\n<div class=\"language-php ext-php line-numbers-mode\"><pre v-pre class=\"language-php\"><code><span class=\"token variable\">$partnerTradeNo</span> <span class=\"token operator\">=</span> <span class=\"token number\">1233455</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$app</span><span class=\"token operator\">-></span><span class=\"token property\">transfer</span><span class=\"token operator\">-></span><span class=\"token function\">queryBalanceOrder</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$partnerTradeNo</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre><div class=\"line-numbers\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br></div></div><h2 id=\"企业付款到银行卡\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#企业付款到银行卡\" aria-hidden=\"true\">#</a> 企业付款到银行卡</h2>\n<p>企业付款到银行卡需要对银行卡号与姓名进行 RSA 加密，所以这里需要先下载 RSA 公钥到本地（服务器），我们提供了一个命令行工具：<a href=\"https://github.com/EasyWeChat/console\" target=\"_blank\" rel=\"noopener noreferrer\">EasyWeChat/console<OutboundLink/></a>，请使用 composer 安装完成。</p>\n<div class=\"language-bash ext-sh line-numbers-mode\"><pre v-pre class=\"language-bash\"><code>$ <span class=\"token function\">composer</span> require easywechat/console -vvv\n</code></pre><div class=\"line-numbers\"><span class=\"line-number\">1</span><br></div></div><p>然后，在项目根目录执行以下命令下载公钥：</p>\n<div class=\"language-bash ext-sh line-numbers-mode\"><pre v-pre class=\"language-bash\"><code>$ ./vendor/bin/easywechat payment:rsa_public_key <span class=\"token punctuation\">\\</span>\n  <span class=\"token operator\">></span>  --mch_id<span class=\"token operator\">=</span><span class=\"token number\">14339221228</span> <span class=\"token punctuation\">\\</span>\n  <span class=\"token operator\">></span>  --api_key<span class=\"token operator\">=</span>36YTbDmLgyQ52noqdxgwGiYy <span class=\"token punctuation\">\\</span>\n  <span class=\"token operator\">></span>  --cert_path<span class=\"token operator\">=</span>/Users/overtrue/www/demo/apiclient_cert.pem <span class=\"token punctuation\">\\</span>\n  <span class=\"token operator\">></span>  --key_path<span class=\"token operator\">=</span>/Users/overtrue/www/demo/apiclient_key.pem\n</code></pre><div class=\"line-numbers\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br><span class=\"line-number\">3</span><br><span class=\"line-number\">4</span><br><span class=\"line-number\">5</span><br></div></div><p>将会在当前目录生成一个 <code>./public-14339221228.pem</code> 文件，你可以将它移动到敏感目录，然后在支付配置文件中加如以下选项：</p>\n<div class=\"language-php ext-php line-numbers-mode\"><pre v-pre class=\"language-php\"><code><span class=\"token keyword\">use</span> <span class=\"token package\">EasyWeChat<span class=\"token punctuation\">\\</span>Factory</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token variable\">$config</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token comment\">// 必要配置</span>\n    <span class=\"token string single-quoted-string\">'app_id'</span>             <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'xxxx'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string single-quoted-string\">'mch_id'</span>             <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'your-mch-id'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string single-quoted-string\">'key'</span>                <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'key-for-signature'</span><span class=\"token punctuation\">,</span>   <span class=\"token comment\">// API 密钥</span>\n\n    <span class=\"token comment\">// 如需使用敏感接口（如退款、发送红包等）需要配置 API 证书路径(登录商户平台下载 API 证书)</span>\n    <span class=\"token string single-quoted-string\">'cert_path'</span>          <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'/path/to/your/cert.pem'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// XXX: 绝对路径！！！！</span>\n    <span class=\"token string single-quoted-string\">'key_path'</span>           <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'/path/to/your/key'</span><span class=\"token punctuation\">,</span>      <span class=\"token comment\">// XXX: 绝对路径！！！！</span>\n\n    <span class=\"token comment\">// 将上面得到的公钥存放路径填写在这里</span>\n    <span class=\"token string single-quoted-string\">'rsa_public_key_path'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'/path/to/your/rsa/publick/key/public-14339221228.pem'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// &lt;&lt;&lt;------------------------</span>\n\n    <span class=\"token string single-quoted-string\">'notify_url'</span>         <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'默认的订单回调地址'</span><span class=\"token punctuation\">,</span>     <span class=\"token comment\">// 你也可以在下单时单独设置来想覆盖它</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token variable\">$app</span> <span class=\"token operator\">=</span> <span class=\"token class-name static-context\">Factory</span><span class=\"token operator\">::</span><span class=\"token function\">payment</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$config</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre><div class=\"line-numbers\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br><span class=\"line-number\">3</span><br><span class=\"line-number\">4</span><br><span class=\"line-number\">5</span><br><span class=\"line-number\">6</span><br><span class=\"line-number\">7</span><br><span class=\"line-number\">8</span><br><span class=\"line-number\">9</span><br><span class=\"line-number\">10</span><br><span class=\"line-number\">11</span><br><span class=\"line-number\">12</span><br><span class=\"line-number\">13</span><br><span class=\"line-number\">14</span><br><span class=\"line-number\">15</span><br><span class=\"line-number\">16</span><br><span class=\"line-number\">17</span><br><span class=\"line-number\">18</span><br><span class=\"line-number\">19</span><br></div></div><div class=\"language-php ext-php line-numbers-mode\"><pre v-pre class=\"language-php\"><code><span class=\"token variable\">$result</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$app</span><span class=\"token operator\">-></span><span class=\"token property\">transfer</span><span class=\"token operator\">-></span><span class=\"token function\">toBankCard</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token string single-quoted-string\">'partner_trade_no'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'1229222022'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string single-quoted-string\">'enc_bank_no'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'6214830901234564'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 银行卡号</span>\n    <span class=\"token string single-quoted-string\">'enc_true_name'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'安正超'</span><span class=\"token punctuation\">,</span>   <span class=\"token comment\">// 银行卡对应的用户真实姓名</span>\n    <span class=\"token string single-quoted-string\">'bank_code'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'1001'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 银行编号</span>\n    <span class=\"token string single-quoted-string\">'amount'</span> <span class=\"token operator\">=></span> <span class=\"token number\">100</span><span class=\"token punctuation\">,</span>  <span class=\"token comment\">// 单位：分</span>\n    <span class=\"token string single-quoted-string\">'desc'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'测试'</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n</code></pre><div class=\"line-numbers\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br><span class=\"line-number\">3</span><br><span class=\"line-number\">4</span><br><span class=\"line-number\">5</span><br><span class=\"line-number\">6</span><br><span class=\"line-number\">7</span><br><span class=\"line-number\">8</span><br><span class=\"line-number\">9</span><br></div></div><h2 id=\"查询付款到银行卡的订单\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#查询付款到银行卡的订单\" aria-hidden=\"true\">#</a> 查询付款到银行卡的订单</h2>\n<div class=\"language-php ext-php line-numbers-mode\"><pre v-pre class=\"language-php\"><code><span class=\"token variable\">$partnerTradeNo</span> <span class=\"token operator\">=</span> <span class=\"token number\">1233455</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$app</span><span class=\"token operator\">-></span><span class=\"token property\">transfer</span><span class=\"token operator\">-></span><span class=\"token function\">queryBankCardOrder</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$partnerTradeNo</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre><div class=\"line-numbers\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br></div></div>","export * from \"-!../../../../../node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[1]!../../../../../node_modules/@vuepress/bundler-webpack/lib/build/ssr/vuepressLoader.js!../../../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!./transfer.html.vue?vue&type=template&id=0bd85c1c\"","import { ssrRender } from \"./transfer.html.vue?vue&type=template&id=0bd85c1c\"\nconst script = {}\nimport { ssrContextKey } from 'vue'\nscript.ssrRender = (...args) => {\n  const ssrContext = args[2].appContext.provides[ssrContextKey]\n  ssrContext._registeredComponents.add(\"/home/runner/work/easywechat/easywechat/docs/node_modules/@vuepress/bundler-webpack/lib/build/ssr/vuepressLoader.js!/home/runner/work/easywechat/easywechat/docs/node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!/home/runner/work/easywechat/easywechat/docs/.vuepress/.temp/pages/4.x/payment/transfer.html.vue\")\n  return ssrRender(...args)\n}\n\n\nexport default script"],"names":[],"sourceRoot":""}