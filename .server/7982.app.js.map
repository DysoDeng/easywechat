{"version":3,"file":"7982.app.js","mappings":";;;;;;;;;;;;AAAO;AACP;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;ECtFA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACA6E;AAC7E;AACA,CAAmC;AACnC;AACA,iDAAiD,2BAAa;AAC9D;AACA,SAAS,SAAS;AAClB;;;AAGA,oDAAe","sources":["webpack:///./.vuepress/.temp/pages/4.x/official-account/material.html.js","webpack:///./.vuepress/.temp/pages/4.x/official-account/material.html.vue","webpack:///./.vuepress/.temp/pages/4.x/official-account/material.html.vue?5443"],"sourcesContent":["export const data = {\n  \"key\": \"v-1544d410\",\n  \"path\": \"/4.x/official-account/material.html\",\n  \"title\": \"素材管理\",\n  \"lang\": \"en-US\",\n  \"frontmatter\": {},\n  \"excerpt\": \"\",\n  \"headers\": [\n    {\n      \"level\": 3,\n      \"title\": \"上传图片\",\n      \"slug\": \"上传图片\",\n      \"children\": []\n    },\n    {\n      \"level\": 3,\n      \"title\": \"上传语音\",\n      \"slug\": \"上传语音\",\n      \"children\": []\n    },\n    {\n      \"level\": 3,\n      \"title\": \"上传视频\",\n      \"slug\": \"上传视频\",\n      \"children\": []\n    },\n    {\n      \"level\": 3,\n      \"title\": \"上传缩略图\",\n      \"slug\": \"上传缩略图\",\n      \"children\": []\n    },\n    {\n      \"level\": 3,\n      \"title\": \"上传图文消息\",\n      \"slug\": \"上传图文消息\",\n      \"children\": []\n    },\n    {\n      \"level\": 3,\n      \"title\": \"修改图文消息\",\n      \"slug\": \"修改图文消息\",\n      \"children\": []\n    },\n    {\n      \"level\": 3,\n      \"title\": \"上传图文消息图片\",\n      \"slug\": \"上传图文消息图片\",\n      \"children\": []\n    },\n    {\n      \"level\": 3,\n      \"title\": \"获取永久素材\",\n      \"slug\": \"获取永久素材\",\n      \"children\": []\n    },\n    {\n      \"level\": 3,\n      \"title\": \"获取永久素材列表\",\n      \"slug\": \"获取永久素材列表\",\n      \"children\": []\n    },\n    {\n      \"level\": 3,\n      \"title\": \"获取素材计数\",\n      \"slug\": \"获取素材计数\",\n      \"children\": []\n    },\n    {\n      \"level\": 3,\n      \"title\": \"删除永久素材；\",\n      \"slug\": \"删除永久素材\",\n      \"children\": []\n    },\n    {\n      \"level\": 3,\n      \"title\": \"文章预览\",\n      \"slug\": \"文章预览\",\n      \"children\": []\n    }\n  ],\n  \"filePathRelative\": \"4.x/official-account/material.md\",\n  \"git\": {\n    \"updatedTime\": 1629906046000,\n    \"contributors\": []\n  }\n}\n","<h1 id=\"素材管理\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#素材管理\" aria-hidden=\"true\">#</a> 素材管理</h1>\n<p>在微信里的图片，音乐，视频等等都需要先上传到微信服务器作为素材才可以在消息中使用。</p>\n<h3 id=\"上传图片\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#上传图片\" aria-hidden=\"true\">#</a> 上传图片</h3>\n<blockquote>\n<p>{warning} 注意：微信图片上传服务有敏感检测系统，图片内容如果含有敏感内容，如色情，商品推广，虚假信息等，上传可能失败。</p>\n</blockquote>\n<div class=\"language-php ext-php line-numbers-mode\"><pre v-pre class=\"language-php\"><code><span class=\"token variable\">$result</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$app</span><span class=\"token operator\">-></span><span class=\"token property\">material</span><span class=\"token operator\">-></span><span class=\"token function\">uploadImage</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"/path/to/your/image.jpg\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// {</span>\n<span class=\"token comment\">//    \"media_id\":MEDIA_ID,</span>\n<span class=\"token comment\">//    \"url\":URL</span>\n<span class=\"token comment\">// }</span>\n</code></pre><div class=\"line-numbers\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br><span class=\"line-number\">3</span><br><span class=\"line-number\">4</span><br><span class=\"line-number\">5</span><br></div></div><blockquote>\n<p><code>url</code> 只有上传图片素材有返回值。</p>\n</blockquote>\n<h3 id=\"上传语音\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#上传语音\" aria-hidden=\"true\">#</a> 上传语音</h3>\n<p>语音 <strong>大小不超过 5M</strong>，<strong>长度不超过 60 秒</strong>，支持 <code>mp3/wma/wav/amr</code> 格式。</p>\n<div class=\"language-php ext-php line-numbers-mode\"><pre v-pre class=\"language-php\"><code><span class=\"token variable\">$result</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$app</span><span class=\"token operator\">-></span><span class=\"token property\">material</span><span class=\"token operator\">-></span><span class=\"token function\">uploadVoice</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"/path/to/your/voice.mp3\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// {</span>\n<span class=\"token comment\">//    \"media_id\":MEDIA_ID,</span>\n<span class=\"token comment\">// }</span>\n</code></pre><div class=\"line-numbers\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br><span class=\"line-number\">3</span><br><span class=\"line-number\">4</span><br></div></div><h3 id=\"上传视频\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#上传视频\" aria-hidden=\"true\">#</a> 上传视频</h3>\n<div class=\"language-php ext-php line-numbers-mode\"><pre v-pre class=\"language-php\"><code><span class=\"token variable\">$result</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$app</span><span class=\"token operator\">-></span><span class=\"token property\">material</span><span class=\"token operator\">-></span><span class=\"token function\">uploadVideo</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"/path/to/your/video.mp4\"</span><span class=\"token punctuation\">,</span> <span class=\"token string double-quoted-string\">\"视频标题\"</span><span class=\"token punctuation\">,</span> <span class=\"token string double-quoted-string\">\"视频描述\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// {</span>\n<span class=\"token comment\">//    \"media_id\":MEDIA_ID,</span>\n<span class=\"token comment\">// }</span>\n</code></pre><div class=\"line-numbers\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br><span class=\"line-number\">3</span><br><span class=\"line-number\">4</span><br></div></div><h3 id=\"上传缩略图\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#上传缩略图\" aria-hidden=\"true\">#</a> 上传缩略图</h3>\n<p>用于视频封面或者音乐封面。</p>\n<div class=\"language-php ext-php line-numbers-mode\"><pre v-pre class=\"language-php\"><code><span class=\"token variable\">$result</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$app</span><span class=\"token operator\">-></span><span class=\"token property\">material</span><span class=\"token operator\">-></span><span class=\"token function\">uploadThumb</span><span class=\"token punctuation\">(</span><span class=\"token string double-quoted-string\">\"/path/to/your/thumb.jpg\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// {</span>\n<span class=\"token comment\">//    \"media_id\":MEDIA_ID,</span>\n<span class=\"token comment\">// }</span>\n</code></pre><div class=\"line-numbers\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br><span class=\"line-number\">3</span><br><span class=\"line-number\">4</span><br></div></div><h3 id=\"上传图文消息\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#上传图文消息\" aria-hidden=\"true\">#</a> 上传图文消息</h3>\n<div class=\"language-php ext-php line-numbers-mode\"><pre v-pre class=\"language-php\"><code><span class=\"token keyword\">use</span> <span class=\"token package\">EasyWeChat<span class=\"token punctuation\">\\</span>Kernel<span class=\"token punctuation\">\\</span>Messages<span class=\"token punctuation\">\\</span>Article</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 上传单篇图文</span>\n<span class=\"token variable\">$article</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Article</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n    <span class=\"token string single-quoted-string\">'title'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'xxx'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string single-quoted-string\">'thumb_media_id'</span> <span class=\"token operator\">=></span> <span class=\"token variable\">$mediaId</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">//...</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token variable\">$app</span><span class=\"token operator\">-></span><span class=\"token property\">material</span><span class=\"token operator\">-></span><span class=\"token function\">uploadArticle</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$article</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 或者多篇图文</span>\n<span class=\"token variable\">$app</span><span class=\"token operator\">-></span><span class=\"token property\">material</span><span class=\"token operator\">-></span><span class=\"token function\">uploadArticle</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token variable\">$article</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$article2</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">...</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre><div class=\"line-numbers\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br><span class=\"line-number\">3</span><br><span class=\"line-number\">4</span><br><span class=\"line-number\">5</span><br><span class=\"line-number\">6</span><br><span class=\"line-number\">7</span><br><span class=\"line-number\">8</span><br><span class=\"line-number\">9</span><br><span class=\"line-number\">10</span><br><span class=\"line-number\">11</span><br><span class=\"line-number\">12</span><br></div></div><h3 id=\"修改图文消息\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#修改图文消息\" aria-hidden=\"true\">#</a> 修改图文消息</h3>\n<p>有三个参数：</p>\n<blockquote>\n<ul>\n<li><code>$mediaId</code> 要更新的文章的 <code>mediaId</code></li>\n<li><code>$article</code> 文章内容，<code>Article</code> 实例或者 全字段数组</li>\n<li><code>$index</code> 要更新的文章在图文消息中的位置（多图文消息时，此字段才有意义，单图片忽略此参数），第一篇为 0；</li>\n</ul>\n</blockquote>\n<div class=\"language-php ext-php line-numbers-mode\"><pre v-pre class=\"language-php\"><code><span class=\"token variable\">$result</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$app</span><span class=\"token operator\">-></span><span class=\"token property\">material</span><span class=\"token operator\">-></span><span class=\"token function\">updateArticle</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$mediaId</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Article</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// or</span>\n\n<span class=\"token variable\">$result</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$app</span><span class=\"token operator\">-></span><span class=\"token property\">material</span><span class=\"token operator\">-></span><span class=\"token function\">updateArticle</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$mediaId</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n   <span class=\"token string single-quoted-string\">'title'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'EasyWeChat 4.0 发布了！'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string single-quoted-string\">'thumb_media_id'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'qQFxUQGO21Li4YrSn3MhnrqtRp9Zi3cbM9uBsepvDmE'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 封面图片 mediaId</span>\n    <span class=\"token string single-quoted-string\">'author'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'overtrue'</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 作者</span>\n    <span class=\"token string single-quoted-string\">'show_cover'</span> <span class=\"token operator\">=></span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// 是否在文章内容显示封面图片</span>\n    <span class=\"token string single-quoted-string\">'digest'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'这里是文章摘要'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string single-quoted-string\">'content'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'这里是文章内容，你可以放很长的内容'</span><span class=\"token punctuation\">,</span>\n    <span class=\"token string single-quoted-string\">'source_url'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'https://www.easywechat.com'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 指定更新多图文中的第 2 篇</span>\n<span class=\"token variable\">$result</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$app</span><span class=\"token operator\">-></span><span class=\"token property\">material</span><span class=\"token operator\">-></span><span class=\"token function\">updateArticle</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$mediaId</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Article</span><span class=\"token punctuation\">(</span><span class=\"token operator\">...</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 第 2 篇</span>\n</code></pre><div class=\"line-numbers\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br><span class=\"line-number\">3</span><br><span class=\"line-number\">4</span><br><span class=\"line-number\">5</span><br><span class=\"line-number\">6</span><br><span class=\"line-number\">7</span><br><span class=\"line-number\">8</span><br><span class=\"line-number\">9</span><br><span class=\"line-number\">10</span><br><span class=\"line-number\">11</span><br><span class=\"line-number\">12</span><br><span class=\"line-number\">13</span><br><span class=\"line-number\">14</span><br><span class=\"line-number\">15</span><br><span class=\"line-number\">16</span><br></div></div><h3 id=\"上传图文消息图片\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#上传图文消息图片\" aria-hidden=\"true\">#</a> 上传图文消息图片</h3>\n<p>返回值中 url 就是上传图片的 URL，可用于后续群发中，放置到图文消息中。</p>\n<div class=\"language-php ext-php line-numbers-mode\"><pre v-pre class=\"language-php\"><code><span class=\"token variable\">$result</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$app</span><span class=\"token operator\">-></span><span class=\"token property\">material</span><span class=\"token operator\">-></span><span class=\"token function\">uploadArticleImage</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$path</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">//{</span>\n<span class=\"token comment\">//    \"url\":  \"http://mmbiz.qpic.cn/mmbiz/gLO17UPS6FS2xsypf378iaNhWacZ1G1UplZYWEYfwvuU6Ont96b1roYsCNFwaRrSaKTPCUdBK9DgEHicsKwWCBRQ/0\"</span>\n<span class=\"token comment\">//}</span>\n</code></pre><div class=\"line-numbers\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br><span class=\"line-number\">3</span><br><span class=\"line-number\">4</span><br></div></div><h3 id=\"获取永久素材\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#获取永久素材\" aria-hidden=\"true\">#</a> 获取永久素材</h3>\n<div class=\"language-php ext-php line-numbers-mode\"><pre v-pre class=\"language-php\"><code><span class=\"token variable\">$resource</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$app</span><span class=\"token operator\">-></span><span class=\"token property\">material</span><span class=\"token operator\">-></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$mediaId</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre><div class=\"line-numbers\"><span class=\"line-number\">1</span><br></div></div><p>如果请求的素材为图文消息，则响应如下：</p>\n<div class=\"language-json ext-json line-numbers-mode\"><pre v-pre class=\"language-json\"><code><span class=\"token punctuation\">{</span>\n <span class=\"token property\">\"news_item\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n       <span class=\"token punctuation\">{</span>\n       <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span>TITLE<span class=\"token punctuation\">,</span>\n       <span class=\"token property\">\"thumb_media_id\"</span><span class=\"token operator\">:</span><span class=\"token operator\">:</span>THUMB_MEDIA_ID<span class=\"token punctuation\">,</span>\n       <span class=\"token property\">\"show_cover_pic\"</span><span class=\"token operator\">:</span>SHOW_COVER_PIC(<span class=\"token number\">0</span>/<span class=\"token number\">1</span>)<span class=\"token punctuation\">,</span>\n       <span class=\"token property\">\"author\"</span><span class=\"token operator\">:</span>AUTHOR<span class=\"token punctuation\">,</span>\n       <span class=\"token property\">\"digest\"</span><span class=\"token operator\">:</span>DIGEST<span class=\"token punctuation\">,</span>\n       <span class=\"token property\">\"content\"</span><span class=\"token operator\">:</span>CONTENT<span class=\"token punctuation\">,</span>\n       <span class=\"token property\">\"url\"</span><span class=\"token operator\">:</span>URL<span class=\"token punctuation\">,</span>\n       <span class=\"token property\">\"content_source_url\"</span><span class=\"token operator\">:</span>CONTENT_SOURCE_URL\n       <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n       <span class=\"token comment\">//多图文消息有多篇文章</span>\n    <span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n</code></pre><div class=\"line-numbers\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br><span class=\"line-number\">3</span><br><span class=\"line-number\">4</span><br><span class=\"line-number\">5</span><br><span class=\"line-number\">6</span><br><span class=\"line-number\">7</span><br><span class=\"line-number\">8</span><br><span class=\"line-number\">9</span><br><span class=\"line-number\">10</span><br><span class=\"line-number\">11</span><br><span class=\"line-number\">12</span><br><span class=\"line-number\">13</span><br><span class=\"line-number\">14</span><br><span class=\"line-number\">15</span><br></div></div><p>如果返回的是视频消息素材，则内容如下：</p>\n<div class=\"language-json ext-json line-numbers-mode\"><pre v-pre class=\"language-json\"><code><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span>TITLE<span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span>DESCRIPTION<span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"down_url\"</span><span class=\"token operator\">:</span>DOWN_URL<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span>\n</code></pre><div class=\"line-numbers\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br><span class=\"line-number\">3</span><br><span class=\"line-number\">4</span><br><span class=\"line-number\">5</span><br></div></div><p>其他类型的素材消息，则响应为 <code>EasyWeChat\\Kernel\\Http\\StreamResponse</code> 实例，开发者可以自行保存为文件。例如</p>\n<div class=\"language-php ext-php line-numbers-mode\"><pre v-pre class=\"language-php\"><code><span class=\"token variable\">$stream</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$app</span><span class=\"token operator\">-></span><span class=\"token property\">material</span><span class=\"token operator\">-></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$mediaId</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token variable\">$stream</span> <span class=\"token keyword\">instanceof</span> <span class=\"token class-name class-name-fully-qualified\"><span class=\"token punctuation\">\\</span>EasyWeChat<span class=\"token punctuation\">\\</span>Kernel<span class=\"token punctuation\">\\</span>Http<span class=\"token punctuation\">\\</span>StreamResponse</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 以内容 md5 为文件名</span>\n    <span class=\"token variable\">$stream</span><span class=\"token operator\">-></span><span class=\"token function\">save</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'保存目录'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// 自定义文件名，不需要带后缀</span>\n    <span class=\"token variable\">$stream</span><span class=\"token operator\">-></span><span class=\"token function\">saveAs</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'保存目录'</span><span class=\"token punctuation\">,</span> <span class=\"token string single-quoted-string\">'文件名'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre><div class=\"line-numbers\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br><span class=\"line-number\">3</span><br><span class=\"line-number\">4</span><br><span class=\"line-number\">5</span><br><span class=\"line-number\">6</span><br><span class=\"line-number\">7</span><br><span class=\"line-number\">8</span><br><span class=\"line-number\">9</span><br></div></div><h3 id=\"获取永久素材列表\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#获取永久素材列表\" aria-hidden=\"true\">#</a> 获取永久素材列表</h3>\n<blockquote>\n<ul>\n<li><code>$type</code>   素材的类型，图片（<code>image</code>）、视频（<code>video</code>）、语音 （<code>voice</code>）、图文（<code>news</code>）</li>\n<li><code>$offset</code> 从全部素材的该偏移位置开始返回，可选，默认 <code>0</code>，0 表示从第一个素材 返回</li>\n<li><code>$count</code>  返回素材的数量，可选，默认 <code>20</code>, 取值在 1 到 20 之间</li>\n</ul>\n</blockquote>\n<div class=\"language-php ext-php line-numbers-mode\"><pre v-pre class=\"language-php\"><code><span class=\"token variable\">$app</span><span class=\"token operator\">-></span><span class=\"token property\">material</span><span class=\"token operator\">-></span><span class=\"token function\">list</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$type</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$offset</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$count</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre><div class=\"line-numbers\"><span class=\"line-number\">1</span><br></div></div><p>示例：</p>\n<div class=\"language-php ext-php line-numbers-mode\"><pre v-pre class=\"language-php\"><code><span class=\"token variable\">$list</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$app</span><span class=\"token operator\">-></span><span class=\"token property\">material</span><span class=\"token operator\">-></span><span class=\"token function\">list</span><span class=\"token punctuation\">(</span><span class=\"token string single-quoted-string\">'image'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre><div class=\"line-numbers\"><span class=\"line-number\">1</span><br></div></div><p>图片、语音、视频 等类型的返回如下</p>\n<div class=\"language-json ext-json line-numbers-mode\"><pre v-pre class=\"language-json\"><code><span class=\"token punctuation\">{</span>\n   <span class=\"token property\">\"total_count\"</span><span class=\"token operator\">:</span> TOTAL_COUNT<span class=\"token punctuation\">,</span>\n   <span class=\"token property\">\"item_count\"</span><span class=\"token operator\">:</span> ITEM_COUNT<span class=\"token punctuation\">,</span>\n   <span class=\"token property\">\"item\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n       <span class=\"token property\">\"media_id\"</span><span class=\"token operator\">:</span> MEDIA_ID<span class=\"token punctuation\">,</span>\n       <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> NAME<span class=\"token punctuation\">,</span>\n       <span class=\"token property\">\"update_time\"</span><span class=\"token operator\">:</span> UPDATE_TIME<span class=\"token punctuation\">,</span>\n       <span class=\"token property\">\"url\"</span><span class=\"token operator\">:</span>URL\n   <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n   <span class=\"token comment\">//可能会有多个素材</span>\n   <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n</code></pre><div class=\"line-numbers\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br><span class=\"line-number\">3</span><br><span class=\"line-number\">4</span><br><span class=\"line-number\">5</span><br><span class=\"line-number\">6</span><br><span class=\"line-number\">7</span><br><span class=\"line-number\">8</span><br><span class=\"line-number\">9</span><br><span class=\"line-number\">10</span><br><span class=\"line-number\">11</span><br><span class=\"line-number\">12</span><br></div></div><p>永久图文消息素材列表的响应如下：</p>\n<div class=\"language-json ext-json line-numbers-mode\"><pre v-pre class=\"language-json\"><code><span class=\"token punctuation\">{</span>\n   <span class=\"token property\">\"total_count\"</span><span class=\"token operator\">:</span> TOTAL_COUNT<span class=\"token punctuation\">,</span>\n   <span class=\"token property\">\"item_count\"</span><span class=\"token operator\">:</span> ITEM_COUNT<span class=\"token punctuation\">,</span>\n   <span class=\"token property\">\"item\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n       <span class=\"token property\">\"media_id\"</span><span class=\"token operator\">:</span> MEDIA_ID<span class=\"token punctuation\">,</span>\n       <span class=\"token property\">\"content\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n           <span class=\"token property\">\"news_item\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">{</span>\n               <span class=\"token property\">\"title\"</span><span class=\"token operator\">:</span> TITLE<span class=\"token punctuation\">,</span>\n               <span class=\"token property\">\"thumb_media_id\"</span><span class=\"token operator\">:</span> THUMB_MEDIA_ID<span class=\"token punctuation\">,</span>\n               <span class=\"token property\">\"show_cover_pic\"</span><span class=\"token operator\">:</span> SHOW_COVER_PIC(<span class=\"token number\">0</span> / <span class=\"token number\">1</span>)<span class=\"token punctuation\">,</span>\n               <span class=\"token property\">\"author\"</span><span class=\"token operator\">:</span> AUTHOR<span class=\"token punctuation\">,</span>\n               <span class=\"token property\">\"digest\"</span><span class=\"token operator\">:</span> DIGEST<span class=\"token punctuation\">,</span>\n               <span class=\"token property\">\"content\"</span><span class=\"token operator\">:</span> CONTENT<span class=\"token punctuation\">,</span>\n               <span class=\"token property\">\"url\"</span><span class=\"token operator\">:</span> URL<span class=\"token punctuation\">,</span>\n               <span class=\"token property\">\"content_source_url\"</span><span class=\"token operator\">:</span> CONTETN_SOURCE_URL\n           <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n           <span class=\"token comment\">//多图文消息会在此处有多篇文章</span>\n           <span class=\"token punctuation\">]</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token property\">\"update_time\"</span><span class=\"token operator\">:</span> UPDATE_TIME\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">//可能有多个图文消息item结构</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span>\n</code></pre><div class=\"line-numbers\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br><span class=\"line-number\">3</span><br><span class=\"line-number\">4</span><br><span class=\"line-number\">5</span><br><span class=\"line-number\">6</span><br><span class=\"line-number\">7</span><br><span class=\"line-number\">8</span><br><span class=\"line-number\">9</span><br><span class=\"line-number\">10</span><br><span class=\"line-number\">11</span><br><span class=\"line-number\">12</span><br><span class=\"line-number\">13</span><br><span class=\"line-number\">14</span><br><span class=\"line-number\">15</span><br><span class=\"line-number\">16</span><br><span class=\"line-number\">17</span><br><span class=\"line-number\">18</span><br><span class=\"line-number\">19</span><br><span class=\"line-number\">20</span><br><span class=\"line-number\">21</span><br><span class=\"line-number\">22</span><br><span class=\"line-number\">23</span><br><span class=\"line-number\">24</span><br></div></div><h3 id=\"获取素材计数\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#获取素材计数\" aria-hidden=\"true\">#</a> 获取素材计数</h3>\n<div class=\"language-php ext-php line-numbers-mode\"><pre v-pre class=\"language-php\"><code><span class=\"token variable\">$stats</span> <span class=\"token operator\">=</span> <span class=\"token variable\">$app</span><span class=\"token operator\">-></span><span class=\"token property\">material</span><span class=\"token operator\">-></span><span class=\"token function\">stats</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// {</span>\n<span class=\"token comment\">//   \"voice_count\":COUNT,</span>\n<span class=\"token comment\">//   \"video_count\":COUNT,</span>\n<span class=\"token comment\">//   \"image_count\":COUNT,</span>\n<span class=\"token comment\">//   \"news_count\":COUNT</span>\n<span class=\"token comment\">// }</span>\n</code></pre><div class=\"line-numbers\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br><span class=\"line-number\">3</span><br><span class=\"line-number\">4</span><br><span class=\"line-number\">5</span><br><span class=\"line-number\">6</span><br><span class=\"line-number\">7</span><br><span class=\"line-number\">8</span><br></div></div><h3 id=\"删除永久素材\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#删除永久素材\" aria-hidden=\"true\">#</a> 删除永久素材；</h3>\n<div class=\"language-php ext-php line-numbers-mode\"><pre v-pre class=\"language-php\"><code><span class=\"token variable\">$app</span><span class=\"token operator\">-></span><span class=\"token property\">material</span><span class=\"token operator\">-></span><span class=\"token function\">delete</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$mediaId</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre><div class=\"line-numbers\"><span class=\"line-number\">1</span><br></div></div><h3 id=\"文章预览\" tabindex=\"-1\"><a class=\"header-anchor\" href=\"#文章预览\" aria-hidden=\"true\">#</a> 文章预览</h3>\n<p>文章预览请参阅 “消息群发” 章节。</p>\n","import { ssrRender } from \"./material.html.vue?vue&type=template&id=6f3a7132\"\nconst script = {}\nimport { ssrContextKey } from 'vue'\nscript.ssrRender = (...args) => {\n  const ssrContext = args[2].appContext.provides[ssrContextKey]\n  ssrContext._registeredComponents.add(\"/home/runner/work/easywechat/easywechat/docs/node_modules/@vuepress/bundler-webpack/lib/build/ssr/vuepressLoader.js!/home/runner/work/easywechat/easywechat/docs/node_modules/vue-loader/dist/index.js??ruleSet[0].use[1]!/home/runner/work/easywechat/easywechat/docs/.vuepress/.temp/pages/4.x/official-account/material.html.vue\")\n  return ssrRender(...args)\n}\n\n\nexport default script"],"names":[],"sourceRoot":""}